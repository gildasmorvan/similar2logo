<div id='chart_div'></div>
<canvas id='grid_canvas' class='center-block' width='300' height='300'></canvas>
<script type='text/javascript'>
	$(document).ready(function () {
		g = new Dygraph(
			document.getElementById('chart_div'),
			'result.txt',
			{ 
				width: 300,
				height:300,
				showRoller: false,
				customBars: false,
				labels: ['Time', 'Preys', 'Predators', 'Grass/4'],
				legend: 'follow',
				labelsSeparateLines: true,
				title: 'Population dynamics'
			}
		);
		setInterval(function() {g.updateOptions( { 'file': 'result.txt' } );}, 20);
	});
</script>
<script type='text/javascript'>
	$(document).ready(function () {
		function drawCanvas(){
			$.ajax({url: 'grid',dataType: 'text',success: function(data) {
				var json = JSON.parse(data),
				  	canvas = document.getElementById('grid_canvas'),
				  	context = canvas.getContext('2d');
				context.clearRect(0, 0, canvas.width, canvas.height);
				for (var i = 0; i < json.agents.length; i++) {
				  var centerX = json.agents[i].x*canvas.width,
				  	  centerY = json.agents[i].y*canvas.height,
				      radius = 1;			
				  if(json.agents[i].t=='p')	{
				  	context.fillStyle = 'purple';
				  } else {
				  	context.fillStyle = 'green';
				  }
				  context.beginPath();
				  context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
				  context.fill();
				}
			}});
		}
		setInterval(function() {drawCanvas();}, 500);
	});
</script>;