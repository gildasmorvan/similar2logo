<canvas id='grid_canvas' class='center-block' width='400' height='400'></canvas>
<div id='graph_div'></div>

<script type='text/javascript'>
	var json;
	drawCanvas = function () {
			
		$.ajax({url: 'grid',dataType: 'text',success: function(data) {	
			json = JSON.parse(data),
		    canvas = document.getElementById('grid_canvas'),
		 	context = canvas.getContext('2d');
		 	context.clearRect(0, 0, canvas.width, canvas.height);
		 	
			for (i = 0; i < json.pheromones.length; i++) {
				var centerX = json.pheromones[i].x*canvas.width,
	               	centerY = json.pheromones[i].y*canvas.height,
	                radius = 5;
                
				value = Math.floor(255 - json.pheromones[i].v * 10);
                context.fillStyle = "rgb("+255+","+value+","+value+")";
                
				context.beginPath();
				context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
				context.fill();
			}
			
			
			 	
			for (var i = 0; i < json.agents.length; i++) {
			 	var centerX = json.agents[i].x*canvas.width;
			  	var centerY = json.agents[i].y*canvas.height;
			  	var radius = 1;			
		  		context.fillStyle = 'blue';
			  	context.beginPath();
			  	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
			  	context.fill();
			}
		
		}});		
	}
</script>