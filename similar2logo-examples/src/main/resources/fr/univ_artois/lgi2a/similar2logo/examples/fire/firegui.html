<canvas id='grid_canvas' class='center-block' width='400' height='400'></canvas>
<div id='chart_div' style='width:100%'></div>
<script type='text/javascript'>
	$(document).ready(function () {
		g = new Dygraph(
			document.getElementById('chart_div'),
			'result.txt',
			{ 
				height:200,
				showRoller: false,
				customBars: false,
				labels: ['Time', 'combustion rate'],
				legend: 'always',
				labelsSeparateLines: true,
				title: 'Fire statistics',
				keepXAxis:true,
				keepYAxis:true
			}
		);
		setInterval(
			function() {
				g.updateOptions( { 'file': 'result.txt' } );
			},
			20
		);
	});
</script>
<script type='text/javascript'>
    drawCanvas = function (data) {
        var json = JSON.parse(data),
            canvas = document.getElementById('grid_canvas'),
            context = canvas.getContext('2d');
        context.clearRect(0, 0, canvas.width, canvas.height);
        for (var i = 0; i < json.agents.length; i++) {
            var centerX = json.agents[i].x * canvas.width;
            var centerY = json.agents[i].y * canvas.height;
            var radius = 4;
            if (json.agents[i].b == 0) {
                context.fillStyle = 'green';
            } else {
                context.fillStyle = 'red';
            }
            context.beginPath();
            context.arc(centerX, centerY, radius, 0, 1 * Math.PI, 2);
            context.fill();
        }
    }
</script>